<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    
    <!--load all styles -->
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="image/favicon.ico">
    
    <script language="JavaScript" type="text/javascript">

        let imgArray = new Array();
        let bgm = new Audio('');
        let imgNum = 1;
        let objImg;
        let imgOpacity = 0;
        let keepPlay = true;

        //페이드 인 아웃 시 카운트
        let volCnt = 0.0001;
        let imgCnt = 0.0003;

        let buttonClicked = false;
        function setImage() {

            for (let i = 1; i <= 250; i++) {
                let j;
                if (i < 10) {
                    j = "0000" + i;
                } else if (i < 100) {
                    j = "000" + i;
                } else if (i < 1000) {
                    j = "00" + i;
                } else if (i < 10000) {
                    j = "0" + i;
                }
                imgArray[i] = "image/off_and_on/off_and_on(" + i + ").jpg";
            }
            showImage();
        }

        function showImage() {
            objImg = document.getElementById("introimg");
            objImg.style.opacity = imgOpacity;
            objImg.src = imgArray[imgNum];
            if (buttonClicked === false) {
                imgNum++;
            }
            //60 -> 455 (-77)
            if (imgNum > 220) {
                keepPlay = false;
                //window.location.replace("http://interlude.live:8080/build/intro_outro.html");
                window.location.replace("http://127.0.0.1:5500/intro_outro.html");
            }
            if (keepPlay) {
                setTimeout(showImage, 60);
            }
        }

        function setAudio() {

            //오디오
            if (!bgm.canPlayType('audio/ogg')) alert('브라우저가 ogg 재생을 지원하지 않습니다.');
            else {
                let bgm_url = 'image/sound/Hiroshi Yoshimura - Wet Land.mp3';
                bgm = new Audio(bgm_url);
                bgm.volume = 0;
                bgm.loop = true;
                bgm.play();

            }
        }
       
        function setAudioFadeIn() {
            //오디오
            if (volCnt * 1.1 + bgm.volume < 0.4) {

                volCnt *= 1.1;
                bgm.volume += volCnt;
                setTimeout(setAudioFadeIn, 50);
            } else {
                bgm.volume = 0.4;

            }
        }

        function setImgFadeIn() {

            let opacityValue = objImg.style.opacity;
            opacityValue *= 1;

            //투명도
            if (imgCnt * 1.3 + opacityValue < 1) {
                imgCnt *= 1.1;
                imgOpacity += imgCnt;

                setTimeout(setImgFadeIn, 50);
            } else {
                imgOpacity = 1;
                volCnt = 0.001;
                imgCnt = 0.03;

            }

        }

        function modalEvent() {
            $('#btn').removeClass();
            $('#btnText').removeClass();
            if (buttonClicked === false) {
                showModal();
            } else if (buttonClicked === true) {
                hideModal();
            }

        }

        function showModal() {
            buttonClicked = true;

            let widthLength = '87.5%';
            let heightLength = '100%';

            let modalContent = document.getElementById("modalContent");
            modalContent.style.width = widthLength;
            modalContent.style.height = heightLength;


            $('#myModal').show();
            $('#btn').addClass('activate_animation_btn');
            let btn = document.getElementById("btn");
            btn.style.backgroundColor = "#001d85";
            btn.style.opacity = 1;
            btn.style.borderColor = "#001d85";


            $('#btnText').addClass('animation_txt');
            let btnText = document.getElementById("btnText");
            btnText.style.color = 'white';
            btnText.style.opacity = 1;
        }

        function hideModal() {
            buttonClicked = false;
            $('#myModal').hide();
            $('#btn').addClass('deactivate_animation_btn');
            let btn = document.getElementById("btn");
            btn.style.backgroundColor = "transparent";
            btn.style.opacity = 0.1;
            btn.style.borderColor = "black";


            $('#btnText').addClass('deactivate_animation_txt');
            let btnText = document.getElementById("btnText");
            btnText.style.color = 'black';
            btnText.style.opacity = 0.1;
        }

        function initializing() {
            setImage();
            setAudio();
            setImgFadeIn();
            setAudioFadeIn();
        }
    </script>

</head>

<body onload="initializing()">
    <div class="imgClass">
        <img id="introimg" style="opacity: 0.1" />
    </div>
    <div id="btnClass">
        <button id="btn" onclick="modalEvent()"></button>
    </div>
    <div id="btnText">
        <span onclick="modalEvent()">about</span>
    </div>
    <div id="myModal" class="modal">
        <div id="modalContent" class="modalContent">
            <div class="modalContainer" style="justify-content: center;">
                <img src="image/poster/off_and_on.jpg" />
            </div>
            <div class="modalLineCenter"></div>
            <div class="modalContainer" style="justify-content: space-between;">
                <div id="details">
                    <div style="height: 70px;">
                        <span id="sceneNumber" >01</span>
                    </div>

                    <div style="height: 70px; margin-left: 10px;">
                        On & Off.
                    </div>

                    <div id="detialContents" style="margin-left: 10px;">

                        세상을 살면서 사람은 수많은 감정을 가진 자신과 마주한다. 그 중 가장 지나치고 싶지만 흔하게 마주하게 되는 우울이라는 감정을 무수히 마주치고 그것에 잠식되기도 하며
                        이겨내기를 반복한다. 가랑비처럼 스미는, 또 그림자같이 떼어낼 수 없는 우울이란 감정도 내 자아의 일부임을 깨닫는다. 우리 모두가 때로는 똑같이, 때로는 가벼운 감기와 같이
                        찾아오고 낫기를 반복하는 이 우울과 자아와의 관계를 이해하고 공존하기를 배워나가길 바란다.
                        <br /><br />
                        포스터는 클릭하면 다운과 프린트가 가능하다.
                        <br /><br />
                        We face countless emotions in our path. Amongst all, there is one emotion which we do not want
                        the most, yet the one we face it so much, depression. Sometimes we drown in it, or sometimes we
                        conquer it bravely, however, depression cannot be escaped because it is part of our lives like a
                        shadow. Depression brings us to the deepest water, but sometimes it is the place that we can
                        find our true selves. So I hope that one day, everyone will be able to understand and embrace
                        the true relationship between depression and self.
                        <br /><br />
                        You can download and print when you click the poster.
                    </div>

                </div>
                <div id="options">
                    <img src="image/etc/send.png" style="height: 30px; width: 30px; margin-bottom: 10px;" onclick="emailBtnClick()" />
                    <img src="image/etc/instagram.png" style="height: 30px; width: 30px; margin-top: 10px;" onclick="printBtnClick()" />
                </div>
            </div>
        </div>
    </div>
</body>

</html>